/*!
 FixedHeader 3.0.1-dev
 Â©2009-2015 SpryMedia Ltd - datatables.net/license
*/
(function(j,k,l){var i=function(f,h){var i=0,g=function(b,a){if(!(this instanceof g))throw"FixedHeader must be initialised with the 'new' keyword.";!0===a&&(a={});b=new h.Api(b);this.c=f.extend(!0,{},g.defaults,a);this.s={dt:b,position:{theadTop:0,tbodyTop:0,tfootTop:0,tfootBottom:0,width:0,left:0,tfootHeight:0,theadHeight:0,windowHeight:f(j).height(),visible:!0},headerMode:null,footerMode:null,autoWidth:b.settings()[0].oFeatures.bAutoWidth,namespace:".dtfc"+i++,scrollLeft:{header:-1,footer:-1},enable:!0};
this.dom={floatingHeader:null,thead:f(b.table().header()),tbody:f(b.table().body()),tfoot:f(b.table().footer()),header:{host:null,floating:null,placeholder:null},footer:{host:null,floating:null,placeholder:null}};this.dom.header.host=this.dom.thead.parent();this.dom.footer.host=this.dom.tfoot.parent();var d=b.settings()[0];if(d._fixedHeader)throw"FixedHeader already initialised on table "+d.nTable.id;d._fixedHeader=this;this._constructor()};f.extend(g.prototype,{enable:function(b){this.s.enable=b;
this.c.header&&this._modeChange("in-place","header",!0);this.c.footer&&this.dom.tfoot.length&&this._modeChange("in-place","footer",!0);this.update()},update:function(){this._positions();this._scroll(!0)},_constructor:function(){var b=this,a=this.s.dt;f(j).on("scroll"+this.s.namespace,function(){b._scroll()}).on("resize"+this.s.namespace,function(){b.s.position.windowHeight=f(j).height();b.update()});a.on("column-reorder.dt.dtfc column-visibility.dt.dtfc draw.dt.dtfc",function(){b.update()});a.on("destroy.dtfc",
function(){a.off(".dtfc");f(j).off(b.s.namespace)});this._positions();this._scroll()},_clone:function(b,a){var d=this.s.dt,c=this.dom[b],e="header"===b?this.dom.thead:this.dom.tfoot;!a&&c.floating?c.floating.removeClass("fixedHeader-floating fixedHeader-locked"):(c.floating&&(c.placeholder.remove(),c.floating.children().detach(),c.floating.remove()),c.floating=f(d.table().node().cloneNode(!1)).removeAttr("id").append(e).appendTo("body"),c.placeholder=e.clone(!1),c.host.append(c.placeholder),this._matchWidths(c.placeholder,
c.floating))},_matchWidths:function(b,a){var d=function(c){var d=f(c,b).map(function(){return f(this).width()}).toArray();f(c,a).each(function(a){f(this).width(d[a])})};d("th");d("td")},_unsize:function(b){var a=this.dom[b].floating;a&&("footer"===b||"header"===b&&!this.s.autoWidth)&&f("th, td",a).css("width","")},_horizontal:function(b,a){var d=this.dom[b],c=this.s.position,e=this.s.scrollLeft;d.floating&&e[b]!==a&&(d.floating.css("left",c.left-a),e[b]=a)},_modeChange:function(b,a,d){var c=this.dom[a],
e=this.s.position;if("in-place"===b){if(c.placeholder&&(c.placeholder.remove(),c.placeholder=null),this._unsize(a),c.host.append("header"===a?this.dom.thead:this.dom.tfoot),c.floating)c.floating.remove(),c.floating=null}else"in"===b?(this._clone(a,d),c.floating.addClass("fixedHeader-floating").css("header"===a?"top":"bottom",this.c[a+"Offset"]).css("left",e.left+"px").css("width",e.width+"px"),"footer"===a&&c.floating.css("top","")):"below"===b?(this._clone(a,d),c.floating.addClass("fixedHeader-locked").css("top",
e.tfootTop-e.theadHeight).css("left",e.left+"px").css("width",e.width+"px")):"above"===b&&(this._clone(a,d),c.floating.addClass("fixedHeader-locked").css("top",e.tbodyTop).css("left",e.left+"px").css("width",e.width+"px"));this.s.scrollLeft.header=-1;this.s.scrollLeft.footer=-1;this.s[a+"Mode"]=b},_positions:function(){var b=this.s.dt.table(),a=this.s.position,d=this.dom,b=f(b.node()),c=b.children("thead"),e=b.children("tfoot"),d=d.tbody;a.visible=b.is(":visible");a.width=b.outerWidth();a.left=b.offset().left;
a.theadTop=c.offset().top;a.tbodyTop=d.offset().top;a.theadHeight=a.tbodyTop-a.theadTop;e.length?(a.tfootTop=e.offset().top,a.tfootBottom=a.tfootTop+e.outerHeight(),a.tfootHeight=a.tfootBottom-a.tfootTop):(a.tfootTop=a.tbodyTop+d.outerHeight(),a.tfootBottom=a.tfootTop,a.tfootHeight=a.tfootTop)},_scroll:function(b){var a=f(k).scrollTop(),d=f(k).scrollLeft(),c=this.s.position,e;if(this.s.enable&&(this.c.header&&(e=!c.visible||a<=c.theadTop-this.c.headerOffset?"in-place":a<=c.tfootTop-c.theadHeight-
this.c.headerOffset?"in":"below",(b||e!==this.s.headerMode)&&this._modeChange(e,"header",b),this._horizontal("header",d)),this.c.footer&&this.dom.tfoot.length))a=!c.visible||a+c.windowHeight>=c.tfootBottom+this.c.footerOffset?"in-place":c.windowHeight+a>c.tbodyTop+c.tfootHeight+this.c.footerOffset?"in":"above",(b||a!==this.s.footerMode)&&this._modeChange(a,"footer",b),this._horizontal("footer",d)}});g.version="3.0.1-dev";g.defaults={header:!0,footer:!1,headerOffset:0,footerOffset:0};f.fn.dataTable.FixedHeader=
g;f.fn.DataTable.FixedHeader=g;f(k).on("init.dt.dtb",function(b,a){if("dt"===b.namespace){var d=a.oInit.fixedHeader||h.defaults.fixedHeader;d&&!a._fixedHeader&&new g(a,d)}});h.Api.register("fixedHeader()",function(){});h.Api.register("fixedHeader.adjust()",function(){return this.iterator("table",function(b){(b=b._fixedHeader)&&b.update()})});h.Api.register("fixedHeader.enable()",function(b){return this.iterator("table",function(a){(a=a._fixedHeader)&&a.enable(b!==l?b:!0)})});h.Api.register("fixedHeader.disable()",
function(){return this.iterator("table",function(b){(b=b._fixedHeader)&&b.enable(!1)})});return g};"function"===typeof define&&define.amd?define(["jquery","datatables"],i):"object"===typeof exports?i(require("jquery"),require("datatables")):jQuery&&!jQuery.fn.dataTable.FixedHeader&&i(jQuery,jQuery.fn.dataTable)})(window,document);
